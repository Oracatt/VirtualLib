#include "../../Extend/EngineDefault.h"
#include "../../EasyDevelop/Camera.h"
#include "../Include/Engine.h"
#include "../Include/MiscFunc.h"
#include "../../Interface/IRenderer.h"
#include <sstream>

const char shaderBlob[]{
0x52,0x61,0x73,0x74,0x65,0x72,0x69,0x7a,0x65,0x72,
0x53,0x74,0x61,0x74,0x65,0x20,0x52,0x53,0x74,0x61,
0x74,0x65,0x0d,0x0a,0x7b,0x0d,0x0a,0x09,0x46,0x69,
0x6c,0x6c,0x4d,0x6f,0x64,0x65,0x20,0x3d,0x20,0x53,
0x6f,0x6c,0x69,0x64,0x3b,0x20,0x0d,0x0a,0x09,0x43,
0x75,0x6c,0x6c,0x4d,0x6f,0x64,0x65,0x20,0x3d,0x20,
0x42,0x61,0x63,0x6b,0x3b,0x20,0x0d,0x0a,0x09,0x46,
0x72,0x6f,0x6e,0x74,0x43,0x6f,0x75,0x6e,0x74,0x65,
0x72,0x43,0x6c,0x6f,0x63,0x6b,0x77,0x69,0x73,0x65,
0x20,0x3d,0x20,0x66,0x61,0x6c,0x73,0x65,0x3b,0x20,
0x0d,0x0a,0x7d,0x3b,0x20,0x0d,0x0a,0x0d,0x0a,0x73,
0x74,0x72,0x75,0x63,0x74,0x20,0x4d,0x61,0x74,0x65,
0x72,0x69,0x61,0x6c,0x0d,0x0a,0x7b,0x0d,0x0a,0x09,
0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x41,0x6d,0x62,
0x69,0x65,0x6e,0x74,0x3b,0x0d,0x0a,0x09,0x66,0x6c,
0x6f,0x61,0x74,0x34,0x20,0x44,0x69,0x66,0x66,0x75,
0x73,0x65,0x3b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,
0x74,0x34,0x20,0x53,0x70,0x65,0x63,0x75,0x6c,0x61,
0x72,0x3b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,
0x20,0x50,0x6f,0x77,0x65,0x72,0x3b,0x0d,0x0a,0x09,
0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,0x50,0x61,0x64,
0x3b,0x0d,0x0a,0x7d,0x3b,0x0d,0x0a,0x0d,0x0a,0x73,
0x74,0x72,0x75,0x63,0x74,0x20,0x4c,0x69,0x67,0x68,
0x74,0x0d,0x0a,0x7b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,
0x61,0x74,0x34,0x20,0x41,0x6d,0x62,0x69,0x65,0x6e,
0x74,0x3b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,
0x34,0x20,0x44,0x69,0x66,0x66,0x75,0x73,0x65,0x3b,
0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,
0x53,0x70,0x65,0x63,0x75,0x6c,0x61,0x72,0x3b,0x0d,
0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,0x50,
0x6f,0x73,0x69,0x74,0x69,0x6f,0x6e,0x3b,0x0d,0x0a,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x52,0x61,0x6e,
0x67,0x65,0x3b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,
0x74,0x33,0x20,0x44,0x69,0x72,0x65,0x63,0x74,0x69,
0x6f,0x6e,0x3b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,
0x74,0x20,0x53,0x70,0x6f,0x74,0x3b,0x0d,0x0a,0x09,
0x69,0x6e,0x74,0x20,0x54,0x79,0x70,0x65,0x3b,0x0d,
0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x41,0x74,
0x74,0x30,0x3b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,
0x74,0x20,0x41,0x74,0x74,0x31,0x3b,0x0d,0x0a,0x09,
0x66,0x6c,0x6f,0x61,0x74,0x20,0x41,0x74,0x74,0x32,
0x3b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,
0x50,0x61,0x64,0x3b,0x0d,0x0a,0x7d,0x3b,0x0d,0x0a,
0x0d,0x0a,0x73,0x74,0x72,0x75,0x63,0x74,0x20,0x56,
0x65,0x72,0x74,0x65,0x78,0x49,0x6e,0x0d,0x0a,0x7b,
0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,
0x50,0x6f,0x73,0x4c,0x20,0x20,0x20,0x20,0x3a,0x20,
0x50,0x4f,0x53,0x49,0x54,0x49,0x4f,0x4e,0x3b,0x0d,
0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,0x4e,
0x6f,0x72,0x6d,0x61,0x6c,0x4c,0x20,0x3a,0x20,0x4e,
0x4f,0x52,0x4d,0x41,0x4c,0x3b,0x0d,0x0a,0x09,0x66,
0x6c,0x6f,0x61,0x74,0x32,0x20,0x54,0x65,0x78,0x20,
0x20,0x20,0x20,0x20,0x3a,0x20,0x54,0x45,0x58,0x43,
0x4f,0x4f,0x52,0x44,0x3b,0x0d,0x0a,0x7d,0x3b,0x0d,
0x0a,0x0d,0x0a,0x73,0x74,0x72,0x75,0x63,0x74,0x20,
0x56,0x65,0x72,0x74,0x65,0x78,0x4f,0x75,0x74,0x0d,
0x0a,0x7b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,
0x34,0x20,0x50,0x6f,0x73,0x48,0x20,0x20,0x20,0x20,
0x3a,0x20,0x53,0x56,0x5f,0x50,0x4f,0x53,0x49,0x54,
0x49,0x4f,0x4e,0x3b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,
0x61,0x74,0x33,0x20,0x50,0x6f,0x73,0x57,0x20,0x20,
0x20,0x20,0x3a,0x20,0x50,0x4f,0x53,0x49,0x54,0x49,
0x4f,0x4e,0x3b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,
0x74,0x33,0x20,0x4e,0x6f,0x72,0x6d,0x61,0x6c,0x57,
0x20,0x3a,0x20,0x4e,0x4f,0x52,0x4d,0x41,0x4c,0x3b,
0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x32,0x20,
0x54,0x65,0x78,0x20,0x20,0x20,0x20,0x20,0x3a,0x20,
0x54,0x45,0x58,0x43,0x4f,0x4f,0x52,0x44,0x3b,0x0d,
0x0a,0x7d,0x3b,0x0d,0x0a,0x0d,0x0a,0x63,0x62,0x75,
0x66,0x66,0x65,0x72,0x20,0x63,0x62,0x50,0x65,0x72,
0x46,0x72,0x61,0x6d,0x65,0x0d,0x0a,0x7b,0x0d,0x0a,
0x09,0x4c,0x69,0x67,0x68,0x74,0x20,0x67,0x4c,0x69,
0x67,0x68,0x74,0x73,0x5b,0x31,0x30,0x5d,0x3b,0x0d,
0x0a,0x09,0x69,0x6e,0x74,0x20,0x67,0x4c,0x69,0x67,
0x68,0x74,0x43,0x6f,0x75,0x6e,0x74,0x3b,0x0d,0x0a,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x20,0x67,0x46,
0x6f,0x67,0x53,0x74,0x61,0x72,0x74,0x3b,0x0d,0x0a,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x20,0x67,0x46,
0x6f,0x67,0x52,0x61,0x6e,0x67,0x65,0x3b,0x0d,0x0a,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x67,0x46,
0x6f,0x67,0x43,0x6f,0x6c,0x6f,0x72,0x3b,0x0d,0x0a,
0x09,0x62,0x6f,0x6f,0x6c,0x20,0x67,0x46,0x6f,0x67,
0x45,0x6e,0x61,0x62,0x6c,0x65,0x64,0x3b,0x0d,0x0a,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,0x67,0x45,
0x79,0x65,0x50,0x6f,0x73,0x57,0x3b,0x0d,0x0a,0x7d,
0x3b,0x0d,0x0a,0x0d,0x0a,0x63,0x62,0x75,0x66,0x66,
0x65,0x72,0x20,0x63,0x62,0x50,0x65,0x72,0x4f,0x62,
0x6a,0x65,0x63,0x74,0x0d,0x0a,0x7b,0x0d,0x0a,0x09,
0x66,0x6c,0x6f,0x61,0x74,0x34,0x78,0x34,0x20,0x67,
0x57,0x6f,0x72,0x6c,0x64,0x3b,0x0d,0x0a,0x09,0x66,
0x6c,0x6f,0x61,0x74,0x34,0x78,0x34,0x20,0x67,0x57,
0x6f,0x72,0x6c,0x64,0x49,0x6e,0x76,0x54,0x72,0x61,
0x6e,0x73,0x70,0x6f,0x73,0x65,0x3b,0x0d,0x0a,0x09,
0x66,0x6c,0x6f,0x61,0x74,0x34,0x78,0x34,0x20,0x67,
0x57,0x6f,0x72,0x6c,0x64,0x56,0x69,0x65,0x77,0x50,
0x72,0x6f,0x6a,0x3b,0x0d,0x0a,0x09,0x66,0x6c,0x6f,
0x61,0x74,0x34,0x78,0x34,0x20,0x67,0x54,0x65,0x78,
0x54,0x72,0x61,0x6e,0x73,0x66,0x6f,0x72,0x6d,0x3b,
0x0d,0x0a,0x09,0x4d,0x61,0x74,0x65,0x72,0x69,0x61,
0x6c,0x20,0x67,0x4d,0x61,0x74,0x65,0x72,0x69,0x61,
0x6c,0x3b,0x0d,0x0a,0x09,0x62,0x6f,0x6f,0x6c,0x20,
0x67,0x49,0x6e,0x76,0x43,0x6f,0x6c,0x6f,0x72,0x3b,
0x0d,0x0a,0x7d,0x3b,0x20,0x0d,0x0a,0x0d,0x0a,0x54,
0x65,0x78,0x74,0x75,0x72,0x65,0x32,0x44,0x20,0x67,
0x44,0x69,0x66,0x66,0x75,0x73,0x65,0x4d,0x61,0x70,
0x3b,0x0d,0x0a,0x0d,0x0a,0x53,0x61,0x6d,0x70,0x6c,
0x65,0x72,0x53,0x74,0x61,0x74,0x65,0x20,0x73,0x61,
0x6d,0x41,0x6e,0x69,0x73,0x6f,0x74,0x72,0x6f,0x70,
0x69,0x63,0x0d,0x0a,0x7b,0x0d,0x0a,0x09,0x46,0x69,
0x6c,0x74,0x65,0x72,0x20,0x3d,0x20,0x41,0x4e,0x49,
0x53,0x4f,0x54,0x52,0x4f,0x50,0x49,0x43,0x3b,0x0d,
0x0a,0x09,0x4d,0x61,0x78,0x41,0x6e,0x69,0x73,0x6f,
0x74,0x72,0x6f,0x70,0x79,0x20,0x3d,0x20,0x34,0x3b,
0x0d,0x0a,0x09,0x2f,0x2f,0x46,0x69,0x6c,0x74,0x65,
0x72,0x20,0x3d,0x20,0x4d,0x49,0x4e,0x5f,0x4d,0x41,
0x47,0x5f,0x4d,0x49,0x50,0x5f,0x4c,0x49,0x4e,0x45,
0x41,0x52,0x3b,0x20,0x2f,0x2f,0xe7,0xbc,0xa9,0xe5,
0xb0,0x8f,0xe5,0x9b,0xbe,0xe5,0xbd,0xa2,0xe4,0xbd,
0xbf,0xe7,0x94,0xa8,0xe7,0xba,0xbf,0xe6,0x80,0xa7,
0xe6,0xbb,0xa4,0xe6,0xb3,0xa2,0x0d,0x0a,0x0d,0x0a,
0x09,0x41,0x64,0x64,0x72,0x65,0x73,0x73,0x55,0x20,
0x3d,0x20,0x57,0x52,0x41,0x50,0x3b,0x0d,0x0a,0x09,
0x41,0x64,0x64,0x72,0x65,0x73,0x73,0x56,0x20,0x3d,
0x20,0x57,0x52,0x41,0x50,0x3b,0x0d,0x0a,0x7d,0x3b,
0x0d,0x0a,0x0d,0x0a,0x76,0x6f,0x69,0x64,0x20,0x43,
0x6f,0x6d,0x70,0x75,0x74,0x65,0x44,0x69,0x72,0x65,
0x63,0x74,0x69,0x6f,0x6e,0x61,0x6c,0x4c,0x69,0x67,
0x68,0x74,0x28,0x4d,0x61,0x74,0x65,0x72,0x69,0x61,
0x6c,0x20,0x6d,0x61,0x74,0x2c,0x20,0x4c,0x69,0x67,
0x68,0x74,0x20,0x4c,0x2c,0x66,0x6c,0x6f,0x61,0x74,
0x33,0x20,0x6e,0x6f,0x72,0x6d,0x61,0x6c,0x2c,0x20,
0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,0x74,0x6f,0x45,
0x79,0x65,0x2c,0x20,0x6f,0x75,0x74,0x20,0x66,0x6c,
0x6f,0x61,0x74,0x34,0x20,0x61,0x6d,0x62,0x69,0x65,
0x6e,0x74,0x2c,0x20,0x6f,0x75,0x74,0x20,0x66,0x6c,
0x6f,0x61,0x74,0x34,0x20,0x64,0x69,0x66,0x66,0x75,
0x73,0x65,0x2c,0x20,0x6f,0x75,0x74,0x20,0x66,0x6c,
0x6f,0x61,0x74,0x34,0x20,0x73,0x70,0x65,0x63,0x29,
0x0d,0x0a,0x7b,0x0d,0x0a,0x09,0x2f,0x2f,0x20,0xe5,
0x88,0x9d,0xe5,0xa7,0x8b,0xe5,0x8c,0x96,0xe8,0xbe,
0x93,0xe5,0x87,0xba,0xe7,0x9a,0x84,0xe5,0x8f,0x98,
0xe9,0x87,0x8f,0x0d,0x0a,0x09,0x61,0x6d,0x62,0x69,
0x65,0x6e,0x74,0x20,0x3d,0x20,0x66,0x6c,0x6f,0x61,
0x74,0x34,0x28,0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,
0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,
0x20,0x30,0x2e,0x30,0x66,0x29,0x3b,0x0d,0x0a,0x09,
0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x20,0x3d,0x20,
0x66,0x6c,0x6f,0x61,0x74,0x34,0x28,0x30,0x2e,0x30,
0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,
0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x29,
0x3b,0x0d,0x0a,0x09,0x73,0x70,0x65,0x63,0x20,0x3d,
0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x28,0x30,0x2e,
0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,
0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,
0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,0x2f,0x20,
0xe5,0x85,0x89,0xe7,0x85,0xa7,0xe7,0x9f,0xa2,0xe9,
0x87,0x8f,0xe4,0xb8,0x8e,0xe5,0x85,0x89,0xe7,0xba,
0xbf,0xe7,0x9a,0x84,0xe4,0xbc,0xa0,0xe6,0x92,0xad,
0xe6,0x96,0xb9,0xe5,0x90,0x91,0xe7,0x9b,0xb8,0xe5,
0x8f,0x8d,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,
0x33,0x20,0x6c,0x69,0x67,0x68,0x74,0x56,0x65,0x63,
0x20,0x3d,0x20,0x2d,0x4c,0x2e,0x44,0x69,0x72,0x65,
0x63,0x74,0x69,0x6f,0x6e,0x3b,0x0d,0x0a,0x0d,0x0a,
0x09,0x2f,0x2f,0x20,0xe6,0xb7,0xbb,0xe5,0x8a,0xa0,
0xe7,0x8e,0xaf,0xe5,0xa2,0x83,0xe5,0x85,0x89,0x0d,
0x0a,0x09,0x61,0x6d,0x62,0x69,0x65,0x6e,0x74,0x20,
0x3d,0x20,0x6d,0x61,0x74,0x2e,0x41,0x6d,0x62,0x69,
0x65,0x6e,0x74,0x20,0x2a,0x20,0x4c,0x2e,0x41,0x6d,
0x62,0x69,0x65,0x6e,0x74,0x3b,0x0d,0x0a,0x0d,0x0a,
0x09,0x2f,0x2f,0x20,0xe6,0xb7,0xbb,0xe5,0x8a,0xa0,
0xe6,0xbc,0xab,0xe5,0x8f,0x8d,0xe5,0xb0,0x84,0xe5,
0x92,0x8c,0xe9,0x95,0x9c,0xe9,0x9d,0xa2,0xe5,0x85,
0x89,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,
0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x46,0x61,0x63,
0x74,0x6f,0x72,0x20,0x3d,0x20,0x64,0x6f,0x74,0x28,
0x6c,0x69,0x67,0x68,0x74,0x56,0x65,0x63,0x2c,0x20,
0x6e,0x6f,0x72,0x6d,0x61,0x6c,0x29,0x3b,0x0d,0x0a,
0x0d,0x0a,0x09,0x2f,0x2f,0x20,0x46,0x6c,0x61,0x74,
0x74,0x65,0x6e,0xe9,0x81,0xbf,0xe5,0x85,0x8d,0xe5,
0x8a,0xa8,0xe6,0x80,0x81,0xe5,0x88,0x86,0xe6,0x94,
0xaf,0x0d,0x0a,0x09,0x5b,0x66,0x6c,0x61,0x74,0x74,
0x65,0x6e,0x5d,0x0d,0x0a,0x09,0x69,0x66,0x20,0x28,
0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x46,0x61,0x63,
0x74,0x6f,0x72,0x20,0x3e,0x20,0x30,0x2e,0x30,0x66,
0x29,0x0d,0x0a,0x09,0x7b,0x0d,0x0a,0x09,0x09,0x66,
0x6c,0x6f,0x61,0x74,0x33,0x20,0x76,0x20,0x3d,0x20,
0x72,0x65,0x66,0x6c,0x65,0x63,0x74,0x28,0x2d,0x6c,
0x69,0x67,0x68,0x74,0x56,0x65,0x63,0x2c,0x20,0x6e,
0x6f,0x72,0x6d,0x61,0x6c,0x29,0x3b,0x0d,0x0a,0x09,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x73,0x70,0x65,
0x63,0x46,0x61,0x63,0x74,0x6f,0x72,0x20,0x3d,0x20,
0x70,0x6f,0x77,0x28,0x6d,0x61,0x78,0x28,0x64,0x6f,
0x74,0x28,0x76,0x2c,0x20,0x74,0x6f,0x45,0x79,0x65,
0x29,0x2c,0x20,0x30,0x2e,0x30,0x30,0x30,0x30,0x31,
0x66,0x29,0x2c,0x20,0x6d,0x61,0x74,0x2e,0x50,0x6f,
0x77,0x65,0x72,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,
0x09,0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x20,0x3d,
0x20,0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x46,0x61,
0x63,0x74,0x6f,0x72,0x20,0x2a,0x20,0x6d,0x61,0x74,
0x2e,0x44,0x69,0x66,0x66,0x75,0x73,0x65,0x20,0x2a,
0x20,0x4c,0x2e,0x44,0x69,0x66,0x66,0x75,0x73,0x65,
0x3b,0x0d,0x0a,0x09,0x09,0x73,0x70,0x65,0x63,0x20,
0x3d,0x20,0x73,0x70,0x65,0x63,0x46,0x61,0x63,0x74,
0x6f,0x72,0x20,0x2a,0x20,0x6d,0x61,0x74,0x2e,0x53,
0x70,0x65,0x63,0x75,0x6c,0x61,0x72,0x20,0x2a,0x20,
0x4c,0x2e,0x53,0x70,0x65,0x63,0x75,0x6c,0x61,0x72,
0x3b,0x0d,0x0a,0x09,0x7d,0x0d,0x0a,0x7d,0x0d,0x0a,
0x0d,0x0a,0x76,0x6f,0x69,0x64,0x20,0x43,0x6f,0x6d,
0x70,0x75,0x74,0x65,0x50,0x6f,0x69,0x6e,0x74,0x4c,
0x69,0x67,0x68,0x74,0x28,0x4d,0x61,0x74,0x65,0x72,
0x69,0x61,0x6c,0x20,0x6d,0x61,0x74,0x2c,0x20,0x4c,
0x69,0x67,0x68,0x74,0x20,0x4c,0x2c,0x20,0x66,0x6c,
0x6f,0x61,0x74,0x33,0x20,0x70,0x6f,0x73,0x2c,0x20,
0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,0x6e,0x6f,0x72,
0x6d,0x61,0x6c,0x2c,0x20,0x66,0x6c,0x6f,0x61,0x74,
0x33,0x20,0x74,0x6f,0x45,0x79,0x65,0x2c,0x6f,0x75,
0x74,0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x61,
0x6d,0x62,0x69,0x65,0x6e,0x74,0x2c,0x20,0x6f,0x75,
0x74,0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x64,
0x69,0x66,0x66,0x75,0x73,0x65,0x2c,0x20,0x6f,0x75,
0x74,0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x73,
0x70,0x65,0x63,0x29,0x0d,0x0a,0x7b,0x0d,0x0a,0x09,
0x2f,0x2f,0x20,0xe5,0x88,0x9d,0xe5,0xa7,0x8b,0xe5,
0x8c,0x96,0xe8,0xbe,0x93,0xe5,0x87,0xba,0xe5,0x8f,
0x98,0xe9,0x87,0x8f,0x0d,0x0a,0x09,0x61,0x6d,0x62,
0x69,0x65,0x6e,0x74,0x20,0x3d,0x20,0x66,0x6c,0x6f,
0x61,0x74,0x34,0x28,0x30,0x2e,0x30,0x66,0x2c,0x20,
0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,
0x2c,0x20,0x30,0x2e,0x30,0x66,0x29,0x3b,0x0d,0x0a,
0x09,0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x20,0x3d,
0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x28,0x30,0x2e,
0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,
0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,
0x29,0x3b,0x0d,0x0a,0x09,0x73,0x70,0x65,0x63,0x20,
0x3d,0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x28,0x30,
0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,
0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,
0x66,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,0x2f,
0x20,0xe8,0xa1,0xa8,0xe9,0x9d,0xa2,0xe6,0x8c,0x87,
0xe5,0x90,0x91,0xe5,0x85,0x89,0xe6,0xba,0x90,0xe7,
0x9a,0x84,0xe7,0x9f,0xa2,0xe9,0x87,0x8f,0x0d,0x0a,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,0x6c,0x69,
0x67,0x68,0x74,0x56,0x65,0x63,0x20,0x3d,0x20,0x4c,
0x2e,0x50,0x6f,0x73,0x69,0x74,0x69,0x6f,0x6e,0x20,
0x2d,0x20,0x70,0x6f,0x73,0x3b,0x0d,0x0a,0x0d,0x0a,
0x09,0x2f,0x2f,0x20,0xe8,0xa1,0xa8,0xe9,0x9d,0xa2,
0xe7,0xa6,0xbb,0xe5,0x85,0x89,0xe6,0xba,0x90,0xe7,
0x9a,0x84,0xe8,0xb7,0x9d,0xe7,0xa6,0xbb,0x0d,0x0a,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x64,0x20,0x3d,
0x20,0x6c,0x65,0x6e,0x67,0x74,0x68,0x28,0x6c,0x69,
0x67,0x68,0x74,0x56,0x65,0x63,0x29,0x3b,0x0d,0x0a,
0x0d,0x0a,0x09,0x2f,0x2f,0x20,0x52,0x61,0x6e,0x67,
0x65,0x20,0x74,0x65,0x73,0x74,0x2e,0x0d,0x0a,0x09,
0x69,0x66,0x20,0x28,0x64,0x20,0x3e,0x20,0x4c,0x2e,
0x52,0x61,0x6e,0x67,0x65,0x29,0x0d,0x0a,0x09,0x09,
0x72,0x65,0x74,0x75,0x72,0x6e,0x3b,0x0d,0x0a,0x0d,
0x0a,0x09,0x2f,0x2f,0x20,0x4e,0x6f,0x72,0x6d,0x61,
0x6c,0x69,0x7a,0x65,0x20,0x74,0x68,0x65,0x20,0x6c,
0x69,0x67,0x68,0x74,0x20,0x76,0x65,0x63,0x74,0x6f,
0x72,0x2e,0x0d,0x0a,0x09,0x6c,0x69,0x67,0x68,0x74,
0x56,0x65,0x63,0x20,0x2f,0x3d,0x20,0x64,0x3b,0x0d,
0x0a,0x0d,0x0a,0x09,0x2f,0x2f,0x20,0x41,0x6d,0x62,
0x69,0x65,0x6e,0x74,0x20,0x74,0x65,0x72,0x6d,0x2e,
0x0d,0x0a,0x09,0x61,0x6d,0x62,0x69,0x65,0x6e,0x74,
0x20,0x3d,0x20,0x6d,0x61,0x74,0x2e,0x41,0x6d,0x62,
0x69,0x65,0x6e,0x74,0x20,0x2a,0x20,0x4c,0x2e,0x41,
0x6d,0x62,0x69,0x65,0x6e,0x74,0x3b,0x0d,0x0a,0x0d,
0x0a,0x09,0x2f,0x2f,0x20,0x41,0x64,0x64,0x20,0x64,
0x69,0x66,0x66,0x75,0x73,0x65,0x20,0x61,0x6e,0x64,
0x20,0x73,0x70,0x65,0x63,0x75,0x6c,0x61,0x72,0x20,
0x74,0x65,0x72,0x6d,0x2c,0x20,0x70,0x72,0x6f,0x76,
0x69,0x64,0x65,0x64,0x20,0x74,0x68,0x65,0x20,0x73,
0x75,0x72,0x66,0x61,0x63,0x65,0x20,0x69,0x73,0x20,
0x69,0x6e,0x20,0x0d,0x0a,0x09,0x2f,0x2f,0x20,0x74,
0x68,0x65,0x20,0x6c,0x69,0x6e,0x65,0x20,0x6f,0x66,
0x20,0x73,0x69,0x74,0x65,0x20,0x6f,0x66,0x20,0x74,
0x68,0x65,0x20,0x6c,0x69,0x67,0x68,0x74,0x2e,0x0d,
0x0a,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,
0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x46,0x61,0x63,
0x74,0x6f,0x72,0x20,0x3d,0x20,0x64,0x6f,0x74,0x28,
0x6c,0x69,0x67,0x68,0x74,0x56,0x65,0x63,0x2c,0x20,
0x6e,0x6f,0x72,0x6d,0x61,0x6c,0x29,0x3b,0x0d,0x0a,
0x0d,0x0a,0x09,0x2f,0x2f,0x20,0x46,0x6c,0x61,0x74,
0x74,0x65,0x6e,0x20,0x74,0x6f,0x20,0x61,0x76,0x6f,
0x69,0x64,0x20,0x64,0x79,0x6e,0x61,0x6d,0x69,0x63,
0x20,0x62,0x72,0x61,0x6e,0x63,0x68,0x69,0x6e,0x67,
0x2e,0x0d,0x0a,0x09,0x5b,0x66,0x6c,0x61,0x74,0x74,
0x65,0x6e,0x5d,0x0d,0x0a,0x09,0x69,0x66,0x20,0x28,
0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x46,0x61,0x63,
0x74,0x6f,0x72,0x20,0x3e,0x20,0x30,0x2e,0x30,0x66,
0x29,0x0d,0x0a,0x09,0x7b,0x0d,0x0a,0x09,0x09,0x66,
0x6c,0x6f,0x61,0x74,0x33,0x20,0x76,0x20,0x3d,0x20,
0x72,0x65,0x66,0x6c,0x65,0x63,0x74,0x28,0x2d,0x6c,
0x69,0x67,0x68,0x74,0x56,0x65,0x63,0x2c,0x20,0x6e,
0x6f,0x72,0x6d,0x61,0x6c,0x29,0x3b,0x0d,0x0a,0x09,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x73,0x70,0x65,
0x63,0x46,0x61,0x63,0x74,0x6f,0x72,0x20,0x3d,0x20,
0x70,0x6f,0x77,0x28,0x6d,0x61,0x78,0x28,0x64,0x6f,
0x74,0x28,0x76,0x2c,0x20,0x74,0x6f,0x45,0x79,0x65,
0x29,0x2c,0x20,0x30,0x2e,0x30,0x30,0x30,0x30,0x31,
0x66,0x29,0x2c,0x20,0x6d,0x61,0x74,0x2e,0x50,0x6f,
0x77,0x65,0x72,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,
0x09,0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x20,0x3d,
0x20,0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x46,0x61,
0x63,0x74,0x6f,0x72,0x20,0x2a,0x20,0x6d,0x61,0x74,
0x2e,0x44,0x69,0x66,0x66,0x75,0x73,0x65,0x20,0x2a,
0x20,0x4c,0x2e,0x44,0x69,0x66,0x66,0x75,0x73,0x65,
0x3b,0x0d,0x0a,0x09,0x09,0x73,0x70,0x65,0x63,0x20,
0x3d,0x20,0x73,0x70,0x65,0x63,0x46,0x61,0x63,0x74,
0x6f,0x72,0x20,0x2a,0x20,0x6d,0x61,0x74,0x2e,0x53,
0x70,0x65,0x63,0x75,0x6c,0x61,0x72,0x20,0x2a,0x20,
0x4c,0x2e,0x53,0x70,0x65,0x63,0x75,0x6c,0x61,0x72,
0x3b,0x0d,0x0a,0x09,0x7d,0x0d,0x0a,0x0d,0x0a,0x09,
0x2f,0x2f,0x20,0xe8,0xa1,0xb0,0xe5,0x87,0x8f,0x0d,
0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x61,0x74,
0x74,0x20,0x3d,0x20,0x31,0x2e,0x30,0x66,0x20,0x2f,
0x20,0x64,0x6f,0x74,0x28,0x66,0x6c,0x6f,0x61,0x74,
0x33,0x28,0x4c,0x2e,0x41,0x74,0x74,0x30,0x2c,0x20,
0x4c,0x2e,0x41,0x74,0x74,0x31,0x2c,0x20,0x4c,0x2e,
0x41,0x74,0x74,0x32,0x29,0x2c,0x20,0x66,0x6c,0x6f,
0x61,0x74,0x33,0x28,0x31,0x2e,0x30,0x66,0x2c,0x20,
0x64,0x2c,0x20,0x64,0x20,0x2a,0x20,0x64,0x29,0x29,
0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x64,0x69,0x66,0x66,
0x75,0x73,0x65,0x20,0x2a,0x3d,0x20,0x61,0x74,0x74,
0x3b,0x0d,0x0a,0x09,0x73,0x70,0x65,0x63,0x20,0x2a,
0x3d,0x20,0x61,0x74,0x74,0x3b,0x0d,0x0a,0x7d,0x0d,
0x0a,0x0d,0x0a,0x76,0x6f,0x69,0x64,0x20,0x43,0x6f,
0x6d,0x70,0x75,0x74,0x65,0x53,0x70,0x6f,0x74,0x4c,
0x69,0x67,0x68,0x74,0x28,0x4d,0x61,0x74,0x65,0x72,
0x69,0x61,0x6c,0x20,0x6d,0x61,0x74,0x2c,0x20,0x4c,
0x69,0x67,0x68,0x74,0x20,0x4c,0x2c,0x20,0x66,0x6c,
0x6f,0x61,0x74,0x33,0x20,0x70,0x6f,0x73,0x2c,0x20,
0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,0x6e,0x6f,0x72,
0x6d,0x61,0x6c,0x2c,0x20,0x66,0x6c,0x6f,0x61,0x74,
0x33,0x20,0x74,0x6f,0x45,0x79,0x65,0x2c,0x6f,0x75,
0x74,0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x61,
0x6d,0x62,0x69,0x65,0x6e,0x74,0x2c,0x20,0x6f,0x75,
0x74,0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x64,
0x69,0x66,0x66,0x75,0x73,0x65,0x2c,0x20,0x6f,0x75,
0x74,0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x73,
0x70,0x65,0x63,0x29,0x0d,0x0a,0x7b,0x0d,0x0a,0x09,
0x2f,0x2f,0x20,0xe5,0x88,0x9d,0xe5,0xa7,0x8b,0xe5,
0x8c,0x96,0xe8,0xbe,0x93,0xe5,0x87,0xba,0xe5,0x8f,
0x98,0xe9,0x87,0x8f,0x2e,0x0d,0x0a,0x09,0x61,0x6d,
0x62,0x69,0x65,0x6e,0x74,0x20,0x3d,0x20,0x66,0x6c,
0x6f,0x61,0x74,0x34,0x28,0x30,0x2e,0x30,0x66,0x2c,
0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,
0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x29,0x3b,0x0d,
0x0a,0x09,0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x20,
0x3d,0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x28,0x30,
0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,
0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,
0x66,0x29,0x3b,0x0d,0x0a,0x09,0x73,0x70,0x65,0x63,
0x20,0x3d,0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x28,
0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,
0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,
0x30,0x66,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,
0x2f,0x20,0xe4,0xbb,0x8e,0xe8,0xa1,0xa8,0xe9,0x9d,
0xa2,0xe6,0x8c,0x87,0xe5,0x90,0x91,0xe5,0x85,0x89,
0xe6,0xba,0x90,0xe7,0x9a,0x84,0xe5,0x85,0x89,0xe7,
0x85,0xa7,0xe7,0x9f,0xa2,0xe9,0x87,0x8f,0x0d,0x0a,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,0x6c,0x69,
0x67,0x68,0x74,0x56,0x65,0x63,0x20,0x3d,0x20,0x4c,
0x2e,0x50,0x6f,0x73,0x69,0x74,0x69,0x6f,0x6e,0x20,
0x2d,0x20,0x70,0x6f,0x73,0x3b,0x0d,0x0a,0x0d,0x0a,
0x09,0x2f,0x2f,0x20,0xe8,0xa1,0xa8,0xe9,0x9d,0xa2,
0xe7,0xa6,0xbb,0xe5,0xbc,0x80,0xe5,0x85,0x89,0xe6,
0xba,0x90,0xe7,0x9a,0x84,0xe8,0xb7,0x9d,0xe7,0xa6,
0xbb,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,
0x64,0x20,0x3d,0x20,0x6c,0x65,0x6e,0x67,0x74,0x68,
0x28,0x6c,0x69,0x67,0x68,0x74,0x56,0x65,0x63,0x29,
0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,0x2f,0x20,0x52,
0x61,0x6e,0x67,0x65,0x20,0x74,0x65,0x73,0x74,0x2e,
0x0d,0x0a,0x09,0x69,0x66,0x20,0x28,0x64,0x20,0x3e,
0x20,0x4c,0x2e,0x52,0x61,0x6e,0x67,0x65,0x29,0x0d,
0x0a,0x09,0x09,0x72,0x65,0x74,0x75,0x72,0x6e,0x3b,
0x0d,0x0a,0x0d,0x0a,0x09,0x2f,0x2f,0x20,0xe8,0xa7,
0x84,0xe8,0x8c,0x83,0xe5,0x8c,0x96,0xe5,0x85,0x89,
0xe7,0x85,0xa7,0xe7,0x9f,0xa2,0xe9,0x87,0x8f,0x0d,
0x0a,0x09,0x6c,0x69,0x67,0x68,0x74,0x56,0x65,0x63,
0x20,0x2f,0x3d,0x20,0x64,0x3b,0x0d,0x0a,0x0d,0x0a,
0x09,0x2f,0x2f,0x20,0xe8,0xae,0xa1,0xe7,0xae,0x97,
0xe7,0x8e,0xaf,0xe5,0xa2,0x83,0xe5,0x85,0x89,0x0d,
0x0a,0x09,0x61,0x6d,0x62,0x69,0x65,0x6e,0x74,0x20,
0x3d,0x20,0x6d,0x61,0x74,0x2e,0x41,0x6d,0x62,0x69,
0x65,0x6e,0x74,0x20,0x2a,0x20,0x4c,0x2e,0x41,0x6d,
0x62,0x69,0x65,0x6e,0x74,0x3b,0x0d,0x0a,0x0d,0x0a,
0x09,0x2f,0x2f,0x20,0xe8,0xae,0xa1,0xe7,0xae,0x97,
0xe6,0xbc,0xab,0xe5,0x8f,0x8d,0xe5,0xb0,0x84,0xe5,
0x92,0x8c,0xe9,0x95,0x9c,0xe9,0x9d,0xa2,0xe5,0x85,
0x89,0xef,0xbc,0x8c,0x70,0x72,0x6f,0x76,0x69,0x64,
0x65,0x64,0x20,0x74,0x68,0x65,0x20,0x73,0x75,0x72,
0x66,0x61,0x63,0x65,0x20,0x69,0x73,0x20,0x69,0x6e,
0x20,0x0d,0x0a,0x09,0x2f,0x2f,0x20,0x74,0x68,0x65,
0x20,0x6c,0x69,0x6e,0x65,0x20,0x6f,0x66,0x20,0x73,
0x69,0x74,0x65,0x20,0x6f,0x66,0x20,0x74,0x68,0x65,
0x20,0x6c,0x69,0x67,0x68,0x74,0x2e,0x0d,0x0a,0x0d,
0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x64,0x69,
0x66,0x66,0x75,0x73,0x65,0x46,0x61,0x63,0x74,0x6f,
0x72,0x20,0x3d,0x20,0x64,0x6f,0x74,0x28,0x6c,0x69,
0x67,0x68,0x74,0x56,0x65,0x63,0x2c,0x20,0x6e,0x6f,
0x72,0x6d,0x61,0x6c,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,
0x09,0x2f,0x2f,0x20,0x46,0x6c,0x61,0x74,0x74,0x65,
0x6e,0xe9,0x81,0xbf,0xe5,0x85,0x8d,0xe5,0x8a,0xa8,
0xe6,0x80,0x81,0xe5,0x88,0x86,0xe6,0x94,0xaf,0x0d,
0x0a,0x09,0x5b,0x66,0x6c,0x61,0x74,0x74,0x65,0x6e,
0x5d,0x0d,0x0a,0x09,0x69,0x66,0x20,0x28,0x64,0x69,
0x66,0x66,0x75,0x73,0x65,0x46,0x61,0x63,0x74,0x6f,
0x72,0x20,0x3e,0x20,0x30,0x2e,0x30,0x66,0x29,0x0d,
0x0a,0x09,0x7b,0x0d,0x0a,0x09,0x09,0x66,0x6c,0x6f,
0x61,0x74,0x33,0x20,0x76,0x20,0x3d,0x20,0x72,0x65,
0x66,0x6c,0x65,0x63,0x74,0x28,0x2d,0x6c,0x69,0x67,
0x68,0x74,0x56,0x65,0x63,0x2c,0x20,0x6e,0x6f,0x72,
0x6d,0x61,0x6c,0x29,0x3b,0x0d,0x0a,0x09,0x09,0x66,
0x6c,0x6f,0x61,0x74,0x20,0x73,0x70,0x65,0x63,0x46,
0x61,0x63,0x74,0x6f,0x72,0x20,0x3d,0x20,0x70,0x6f,
0x77,0x28,0x6d,0x61,0x78,0x28,0x64,0x6f,0x74,0x28,
0x76,0x2c,0x20,0x74,0x6f,0x45,0x79,0x65,0x29,0x2c,
0x20,0x30,0x2e,0x30,0x30,0x30,0x30,0x31,0x66,0x29,
0x2c,0x20,0x6d,0x61,0x74,0x2e,0x50,0x6f,0x77,0x65,
0x72,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x09,0x64,
0x69,0x66,0x66,0x75,0x73,0x65,0x20,0x3d,0x20,0x64,
0x69,0x66,0x66,0x75,0x73,0x65,0x46,0x61,0x63,0x74,
0x6f,0x72,0x20,0x2a,0x20,0x6d,0x61,0x74,0x2e,0x44,
0x69,0x66,0x66,0x75,0x73,0x65,0x20,0x2a,0x20,0x4c,
0x2e,0x44,0x69,0x66,0x66,0x75,0x73,0x65,0x3b,0x0d,
0x0a,0x09,0x09,0x73,0x70,0x65,0x63,0x20,0x3d,0x20,
0x73,0x70,0x65,0x63,0x46,0x61,0x63,0x74,0x6f,0x72,
0x20,0x2a,0x20,0x6d,0x61,0x74,0x2e,0x53,0x70,0x65,
0x63,0x75,0x6c,0x61,0x72,0x20,0x2a,0x20,0x4c,0x2e,
0x53,0x70,0x65,0x63,0x75,0x6c,0x61,0x72,0x3b,0x0d,
0x0a,0x09,0x7d,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,0x2f,
0x20,0x53,0x63,0x61,0x6c,0x65,0x20,0x62,0x79,0x20,
0x73,0x70,0x6f,0x74,0x6c,0x69,0x67,0x68,0x74,0x20,
0x66,0x61,0x63,0x74,0x6f,0x72,0x20,0x61,0x6e,0x64,
0x20,0x61,0x74,0x74,0x65,0x6e,0x75,0x61,0x74,0x65,
0x2e,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,
0x73,0x70,0x6f,0x74,0x20,0x3d,0x20,0x70,0x6f,0x77,
0x28,0x6d,0x61,0x78,0x28,0x64,0x6f,0x74,0x28,0x2d,
0x6c,0x69,0x67,0x68,0x74,0x56,0x65,0x63,0x2c,0x20,
0x4c,0x2e,0x44,0x69,0x72,0x65,0x63,0x74,0x69,0x6f,
0x6e,0x29,0x2c,0x20,0x30,0x2e,0x30,0x30,0x30,0x30,
0x31,0x66,0x29,0x2c,0x20,0x4c,0x2e,0x53,0x70,0x6f,
0x74,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,0x2f,
0x20,0x53,0x63,0x61,0x6c,0x65,0x20,0x62,0x79,0x20,
0x73,0x70,0x6f,0x74,0x6c,0x69,0x67,0x68,0x74,0x20,
0x66,0x61,0x63,0x74,0x6f,0x72,0x20,0x61,0x6e,0x64,
0x20,0x61,0x74,0x74,0x65,0x6e,0x75,0x61,0x74,0x65,
0x2e,0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,
0x61,0x74,0x74,0x20,0x3d,0x20,0x73,0x70,0x6f,0x74,
0x20,0x2f,0x20,0x64,0x6f,0x74,0x28,0x66,0x6c,0x6f,
0x61,0x74,0x33,0x28,0x4c,0x2e,0x41,0x74,0x74,0x30,
0x2c,0x20,0x4c,0x2e,0x41,0x74,0x74,0x31,0x2c,0x20,
0x4c,0x2e,0x41,0x74,0x74,0x32,0x29,0x2c,0x20,0x66,
0x6c,0x6f,0x61,0x74,0x33,0x28,0x31,0x2e,0x30,0x66,
0x2c,0x20,0x64,0x2c,0x20,0x64,0x20,0x2a,0x20,0x64,
0x29,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x61,0x6d,
0x62,0x69,0x65,0x6e,0x74,0x20,0x2a,0x3d,0x20,0x73,
0x70,0x6f,0x74,0x3b,0x0d,0x0a,0x09,0x64,0x69,0x66,
0x66,0x75,0x73,0x65,0x20,0x2a,0x3d,0x20,0x61,0x74,
0x74,0x3b,0x0d,0x0a,0x09,0x73,0x70,0x65,0x63,0x20,
0x2a,0x3d,0x20,0x61,0x74,0x74,0x3b,0x0d,0x0a,0x7d,
0x0d,0x0a,0x0d,0x0a,0x56,0x65,0x72,0x74,0x65,0x78,
0x4f,0x75,0x74,0x20,0x56,0x53,0x28,0x56,0x65,0x72,
0x74,0x65,0x78,0x49,0x6e,0x20,0x76,0x69,0x6e,0x29,
0x0d,0x0a,0x7b,0x0d,0x0a,0x09,0x56,0x65,0x72,0x74,
0x65,0x78,0x4f,0x75,0x74,0x20,0x76,0x6f,0x75,0x74,
0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,0x2f,0x20,0xe8,
0xbd,0xac,0xe6,0x8d,0xa2,0xe5,0x88,0xb0,0xe4,0xb8,
0x96,0xe7,0x95,0x8c,0xe7,0xa9,0xba,0xe9,0x97,0xb4,
0x0d,0x0a,0x09,0x76,0x6f,0x75,0x74,0x2e,0x50,0x6f,
0x73,0x57,0x20,0x3d,0x20,0x6d,0x75,0x6c,0x28,0x66,
0x6c,0x6f,0x61,0x74,0x34,0x28,0x76,0x69,0x6e,0x2e,
0x50,0x6f,0x73,0x4c,0x2c,0x20,0x31,0x2e,0x30,0x66,
0x29,0x2c,0x20,0x67,0x57,0x6f,0x72,0x6c,0x64,0x29,
0x2e,0x78,0x79,0x7a,0x3b,0x0d,0x0a,0x09,0x76,0x6f,
0x75,0x74,0x2e,0x4e,0x6f,0x72,0x6d,0x61,0x6c,0x57,
0x20,0x3d,0x20,0x6d,0x75,0x6c,0x28,0x76,0x69,0x6e,
0x2e,0x4e,0x6f,0x72,0x6d,0x61,0x6c,0x4c,0x2c,0x20,
0x28,0x66,0x6c,0x6f,0x61,0x74,0x33,0x78,0x33,0x29,
0x67,0x57,0x6f,0x72,0x6c,0x64,0x49,0x6e,0x76,0x54,
0x72,0x61,0x6e,0x73,0x70,0x6f,0x73,0x65,0x29,0x3b,
0x0d,0x0a,0x0d,0x0a,0x09,0x2f,0x2f,0x20,0xe8,0xbd,
0xac,0xe6,0x8d,0xa2,0xe5,0x88,0xb0,0xe9,0xbd,0x90,
0xe6,0xac,0xa1,0xe5,0x89,0xaa,0xe8,0xa3,0x81,0xe7,
0xa9,0xba,0xe9,0x97,0xb4,0x0d,0x0a,0x09,0x76,0x6f,
0x75,0x74,0x2e,0x50,0x6f,0x73,0x48,0x20,0x3d,0x20,
0x6d,0x75,0x6c,0x28,0x66,0x6c,0x6f,0x61,0x74,0x34,
0x28,0x76,0x69,0x6e,0x2e,0x50,0x6f,0x73,0x4c,0x2c,
0x20,0x31,0x2e,0x30,0x66,0x29,0x2c,0x20,0x67,0x57,
0x6f,0x72,0x6c,0x64,0x56,0x69,0x65,0x77,0x50,0x72,
0x6f,0x6a,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,
0x2f,0x20,0x4f,0x75,0x74,0x70,0x75,0x74,0x20,0x76,
0x65,0x72,0x74,0x65,0x78,0x20,0x61,0x74,0x74,0x72,
0x69,0x62,0x75,0x74,0x65,0x73,0x20,0x66,0x6f,0x72,
0x20,0x69,0x6e,0x74,0x65,0x72,0x70,0x6f,0x6c,0x61,
0x74,0x69,0x6f,0x6e,0x20,0x61,0x63,0x72,0x6f,0x73,
0x73,0x20,0x74,0x72,0x69,0x61,0x6e,0x67,0x6c,0x65,
0x2e,0x0d,0x0a,0x09,0x76,0x6f,0x75,0x74,0x2e,0x54,
0x65,0x78,0x20,0x3d,0x20,0x6d,0x75,0x6c,0x28,0x66,
0x6c,0x6f,0x61,0x74,0x34,0x28,0x76,0x69,0x6e,0x2e,
0x54,0x65,0x78,0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,
0x20,0x31,0x2e,0x30,0x66,0x29,0x2c,0x20,0x67,0x54,
0x65,0x78,0x54,0x72,0x61,0x6e,0x73,0x66,0x6f,0x72,
0x6d,0x29,0x2e,0x78,0x79,0x3b,0x0d,0x0a,0x0d,0x0a,
0x09,0x72,0x65,0x74,0x75,0x72,0x6e,0x20,0x76,0x6f,
0x75,0x74,0x3b,0x0d,0x0a,0x7d,0x0d,0x0a,0x0d,0x0a,
0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x50,0x53,0x28,
0x56,0x65,0x72,0x74,0x65,0x78,0x4f,0x75,0x74,0x20,
0x70,0x69,0x6e,0x29,0x20,0x3a,0x20,0x53,0x56,0x5f,
0x54,0x61,0x72,0x67,0x65,0x74,0x0d,0x0a,0x7b,0x0d,
0x0a,0x09,0x2f,0x2f,0x20,0xe6,0x8f,0x92,0xe5,0x80,
0xbc,0xe5,0x90,0x8e,0xe7,0x9a,0x84,0xe6,0xb3,0x95,
0xe7,0xba,0xbf,0xe9,0x9c,0x80,0xe8,0xa6,0x81,0xe9,
0x87,0x8d,0xe6,0x96,0xb0,0xe5,0xbd,0x92,0xe4,0xb8,
0x80,0xe5,0x8c,0x96,0x0d,0x0a,0x09,0x70,0x69,0x6e,
0x2e,0x4e,0x6f,0x72,0x6d,0x61,0x6c,0x57,0x20,0x3d,
0x20,0x6e,0x6f,0x72,0x6d,0x61,0x6c,0x69,0x7a,0x65,
0x28,0x70,0x69,0x6e,0x2e,0x4e,0x6f,0x72,0x6d,0x61,
0x6c,0x57,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x2f,0x2f,
0x20,0x74,0x6f,0x45,0x79,0x65,0xe7,0x9f,0xa2,0xe9,
0x87,0x8f,0xe7,0x94,0xa8,0xe4,0xba,0x8e,0xe5,0x85,
0x89,0xe7,0x85,0xa7,0xe8,0xae,0xa1,0xe7,0xae,0x97,
0x0d,0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x33,0x20,
0x74,0x6f,0x45,0x79,0x65,0x20,0x3d,0x20,0x67,0x45,
0x79,0x65,0x50,0x6f,0x73,0x57,0x20,0x2d,0x20,0x70,
0x69,0x6e,0x2e,0x50,0x6f,0x73,0x57,0x3b,0x0d,0x0a,
0x0d,0x0a,0x09,0x2f,0x2f,0x20,0xe4,0xbf,0x9d,0xe5,
0xad,0x98,0xe8,0xa7,0x82,0xe5,0xaf,0x9f,0xe7,0x82,
0xb9,0xe5,0x88,0xb0,0xe8,0xa1,0xa8,0xe9,0x9d,0xa2,
0xe7,0x9a,0x84,0xe8,0xb7,0x9d,0xe7,0xa6,0xbb,0x0d,
0x0a,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x64,0x69,
0x73,0x74,0x54,0x6f,0x45,0x79,0x65,0x20,0x3d,0x20,
0x6c,0x65,0x6e,0x67,0x74,0x68,0x28,0x74,0x6f,0x45,
0x79,0x65,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,
0x2f,0x20,0xe8,0xa7,0x84,0xe8,0x8c,0x83,0xe5,0x8c,
0x96,0x0d,0x0a,0x09,0x74,0x6f,0x45,0x79,0x65,0x20,
0x2f,0x3d,0x20,0x64,0x69,0x73,0x74,0x54,0x6f,0x45,
0x79,0x65,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,0x2f,
0x20,0x44,0x65,0x66,0x61,0x75,0x6c,0x74,0x20,0x74,
0x6f,0x20,0x6d,0x75,0x6c,0x74,0x69,0x70,0x6c,0x69,
0x63,0x61,0x74,0x69,0x76,0x65,0x20,0x69,0x64,0x65,
0x6e,0x74,0x69,0x74,0x79,0x2e,0x0d,0x0a,0x09,0x66,
0x6c,0x6f,0x61,0x74,0x34,0x20,0x74,0x65,0x78,0x43,
0x6f,0x6c,0x6f,0x72,0x20,0x3d,0x20,0x66,0x6c,0x6f,
0x61,0x74,0x34,0x28,0x31,0x2c,0x20,0x31,0x2c,0x20,
0x31,0x2c,0x20,0x31,0x29,0x3b,0x0d,0x0a,0x09,0x74,
0x65,0x78,0x43,0x6f,0x6c,0x6f,0x72,0x20,0x3d,0x20,
0x67,0x44,0x69,0x66,0x66,0x75,0x73,0x65,0x4d,0x61,
0x70,0x2e,0x53,0x61,0x6d,0x70,0x6c,0x65,0x28,0x73,
0x61,0x6d,0x41,0x6e,0x69,0x73,0x6f,0x74,0x72,0x6f,
0x70,0x69,0x63,0x2c,0x20,0x70,0x69,0x6e,0x2e,0x54,
0x65,0x78,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x2f,
0x2f,0x20,0xe5,0xa6,0x82,0xe6,0x9e,0x9c,0xe7,0xba,
0xb9,0xe7,0x90,0x86,0xe7,0x9a,0x84,0x61,0x6c,0x70,
0x68,0x61,0x3c,0x30,0x2e,0x31,0xef,0xbc,0x8c,0xe5,
0x88,0x99,0xe4,0xb8,0xa2,0xe5,0xbc,0x83,0xe5,0x83,
0x8f,0xe7,0xb4,0xa0,0xe3,0x80,0x82,0x0d,0x0a,0x09,
0x2f,0x2f,0x20,0xe6,0xb3,0xa8,0xe6,0x84,0x8f,0xef,
0xbc,0x8c,0xe6,0x88,0x91,0xe4,0xbb,0xac,0xe5,0xba,
0x94,0xe8,0xaf,0xa5,0xe5,0xb0,0xbd,0xe5,0x8f,0xaf,
0xe8,0x83,0xbd,0xe6,0x97,0xa9,0xe5,0x9c,0xb0,0xe8,
0xbf,0x9b,0xe8,0xa1,0x8c,0xe8,0xbf,0x99,0xe4,0xb8,
0xaa,0xe6,0xb5,0x8b,0xe8,0xaf,0x95,0xef,0xbc,0x8c,
0xe8,0xbf,0x99,0xe6,0xa0,0xb7,0xe6,0x88,0x91,0xe4,
0xbb,0xac,0xe5,0xb0,0xb1,0xe5,0x8f,0xaf,0xe4,0xbb,
0xa5,0xe5,0x8f,0x8a,0xe6,0x97,0xa9,0xe9,0x80,0x80,
0xe5,0x87,0xba,0x0d,0x0a,0x09,0x2f,0x2f,0x20,0x73,
0x68,0x61,0x64,0x65,0x72,0xef,0xbc,0x8c,0xe5,0xbf,
0xbd,0xe7,0x95,0xa5,0xe5,0x85,0xb6,0xe4,0xbd,0x99,
0x73,0x68,0x61,0x64,0x65,0x72,0xe4,0xbb,0xa3,0xe7,
0xa0,0x81,0xe3,0x80,0x82,0x0d,0x0a,0x09,0x63,0x6c,
0x69,0x70,0x28,0x74,0x65,0x78,0x43,0x6f,0x6c,0x6f,
0x72,0x2e,0x61,0x20,0x2d,0x20,0x30,0x2e,0x30,0x31,
0x66,0x29,0x3b,0x0d,0x0a,0x09,0x2f,0x2f,0x0d,0x0a,
0x09,0x2f,0x2f,0x20,0xe5,0x85,0x89,0xe7,0x85,0xa7,
0x0d,0x0a,0x09,0x2f,0x2f,0x0d,0x0a,0x0d,0x0a,0x09,
0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x6c,0x69,0x74,
0x43,0x6f,0x6c,0x6f,0x72,0x20,0x3d,0x20,0x74,0x65,
0x78,0x43,0x6f,0x6c,0x6f,0x72,0x3b,0x0d,0x0a,0x09,
0x69,0x66,0x20,0x28,0x67,0x4c,0x69,0x67,0x68,0x74,
0x43,0x6f,0x75,0x6e,0x74,0x20,0x3e,0x20,0x30,0x29,
0x0d,0x0a,0x09,0x7b,0x0d,0x0a,0x09,0x09,0x2f,0x2f,
0x20,0x53,0x74,0x61,0x72,0x74,0x20,0x77,0x69,0x74,
0x68,0x20,0x61,0x20,0x73,0x75,0x6d,0x20,0x6f,0x66,
0x20,0x7a,0x65,0x72,0x6f,0x2e,0x20,0x0d,0x0a,0x09,
0x09,0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,0x61,0x6d,
0x62,0x69,0x65,0x6e,0x74,0x20,0x3d,0x20,0x66,0x6c,
0x6f,0x61,0x74,0x34,0x28,0x30,0x2e,0x30,0x66,0x2c,
0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,
0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x29,0x3b,0x0d,
0x0a,0x09,0x09,0x66,0x6c,0x6f,0x61,0x74,0x34,0x20,
0x64,0x69,0x66,0x66,0x75,0x73,0x65,0x20,0x3d,0x20,
0x66,0x6c,0x6f,0x61,0x74,0x34,0x28,0x30,0x2e,0x30,
0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,
0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x29,
0x3b,0x0d,0x0a,0x09,0x09,0x66,0x6c,0x6f,0x61,0x74,
0x34,0x20,0x73,0x70,0x65,0x63,0x20,0x3d,0x20,0x66,
0x6c,0x6f,0x61,0x74,0x34,0x28,0x30,0x2e,0x30,0x66,
0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,
0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x29,0x3b,
0x0d,0x0a,0x0d,0x0a,0x09,0x09,0x2f,0x2f,0x20,0x53,
0x75,0x6d,0x20,0x74,0x68,0x65,0x20,0x6c,0x69,0x67,
0x68,0x74,0x20,0x63,0x6f,0x6e,0x74,0x72,0x69,0x62,
0x75,0x74,0x69,0x6f,0x6e,0x20,0x66,0x72,0x6f,0x6d,
0x20,0x65,0x61,0x63,0x68,0x20,0x6c,0x69,0x67,0x68,
0x74,0x20,0x73,0x6f,0x75,0x72,0x63,0x65,0x2e,0x20,
0x20,0x0d,0x0a,0x09,0x09,0x5b,0x75,0x6e,0x72,0x6f,
0x6c,0x6c,0x5d,0x0d,0x0a,0x09,0x09,0x66,0x6f,0x72,
0x20,0x28,0x69,0x6e,0x74,0x20,0x69,0x20,0x3d,0x20,
0x30,0x3b,0x20,0x69,0x20,0x3c,0x20,0x67,0x4c,0x69,
0x67,0x68,0x74,0x43,0x6f,0x75,0x6e,0x74,0x3b,0x20,
0x2b,0x2b,0x69,0x29,0x0d,0x0a,0x09,0x09,0x7b,0x0d,
0x0a,0x09,0x09,0x09,0x66,0x6c,0x6f,0x61,0x74,0x34,
0x20,0x41,0x20,0x3d,0x20,0x66,0x6c,0x6f,0x61,0x74,
0x34,0x28,0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,
0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,
0x30,0x2e,0x30,0x66,0x29,0x2c,0x20,0x44,0x20,0x3d,
0x20,0x66,0x6c,0x6f,0x61,0x74,0x34,0x28,0x30,0x2e,
0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,0x2c,0x20,
0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,
0x29,0x2c,0x20,0x53,0x20,0x3d,0x20,0x66,0x6c,0x6f,
0x61,0x74,0x34,0x28,0x30,0x2e,0x30,0x66,0x2c,0x20,
0x30,0x2e,0x30,0x66,0x2c,0x20,0x30,0x2e,0x30,0x66,
0x2c,0x20,0x30,0x2e,0x30,0x66,0x29,0x3b,0x0d,0x0a,
0x09,0x09,0x09,0x69,0x66,0x20,0x28,0x67,0x4c,0x69,
0x67,0x68,0x74,0x73,0x5b,0x69,0x5d,0x2e,0x54,0x79,
0x70,0x65,0x20,0x3d,0x3d,0x20,0x31,0x29,0x0d,0x0a,
0x09,0x09,0x09,0x09,0x43,0x6f,0x6d,0x70,0x75,0x74,
0x65,0x44,0x69,0x72,0x65,0x63,0x74,0x69,0x6f,0x6e,
0x61,0x6c,0x4c,0x69,0x67,0x68,0x74,0x28,0x67,0x4d,
0x61,0x74,0x65,0x72,0x69,0x61,0x6c,0x2c,0x20,0x67,
0x4c,0x69,0x67,0x68,0x74,0x73,0x5b,0x69,0x5d,0x2c,
0x20,0x70,0x69,0x6e,0x2e,0x4e,0x6f,0x72,0x6d,0x61,
0x6c,0x57,0x2c,0x20,0x74,0x6f,0x45,0x79,0x65,0x2c,
0x20,0x41,0x2c,0x20,0x44,0x2c,0x20,0x53,0x29,0x3b,
0x0d,0x0a,0x09,0x09,0x09,0x65,0x6c,0x73,0x65,0x20,
0x69,0x66,0x20,0x28,0x67,0x4c,0x69,0x67,0x68,0x74,
0x73,0x5b,0x69,0x5d,0x2e,0x54,0x79,0x70,0x65,0x20,
0x3d,0x3d,0x20,0x32,0x29,0x0d,0x0a,0x09,0x09,0x09,
0x09,0x43,0x6f,0x6d,0x70,0x75,0x74,0x65,0x50,0x6f,
0x69,0x6e,0x74,0x4c,0x69,0x67,0x68,0x74,0x28,0x67,
0x4d,0x61,0x74,0x65,0x72,0x69,0x61,0x6c,0x2c,0x20,
0x67,0x4c,0x69,0x67,0x68,0x74,0x73,0x5b,0x69,0x5d,
0x2c,0x20,0x70,0x69,0x6e,0x2e,0x50,0x6f,0x73,0x57,
0x2c,0x20,0x70,0x69,0x6e,0x2e,0x4e,0x6f,0x72,0x6d,
0x61,0x6c,0x57,0x2c,0x20,0x74,0x6f,0x45,0x79,0x65,
0x2c,0x20,0x41,0x2c,0x20,0x44,0x2c,0x20,0x53,0x29,
0x3b,0x0d,0x0a,0x09,0x09,0x09,0x65,0x6c,0x73,0x65,
0x20,0x69,0x66,0x20,0x28,0x67,0x4c,0x69,0x67,0x68,
0x74,0x73,0x5b,0x69,0x5d,0x2e,0x54,0x79,0x70,0x65,
0x20,0x3d,0x3d,0x20,0x33,0x29,0x0d,0x0a,0x09,0x09,
0x09,0x09,0x43,0x6f,0x6d,0x70,0x75,0x74,0x65,0x53,
0x70,0x6f,0x74,0x4c,0x69,0x67,0x68,0x74,0x28,0x67,
0x4d,0x61,0x74,0x65,0x72,0x69,0x61,0x6c,0x2c,0x20,
0x67,0x4c,0x69,0x67,0x68,0x74,0x73,0x5b,0x69,0x5d,
0x2c,0x20,0x70,0x69,0x6e,0x2e,0x50,0x6f,0x73,0x57,
0x2c,0x20,0x70,0x69,0x6e,0x2e,0x4e,0x6f,0x72,0x6d,
0x61,0x6c,0x57,0x2c,0x20,0x74,0x6f,0x45,0x79,0x65,
0x2c,0x20,0x41,0x2c,0x20,0x44,0x2c,0x20,0x53,0x29,
0x3b,0x0d,0x0a,0x09,0x09,0x09,0x61,0x6d,0x62,0x69,
0x65,0x6e,0x74,0x20,0x2b,0x3d,0x20,0x41,0x3b,0x0d,
0x0a,0x09,0x09,0x09,0x64,0x69,0x66,0x66,0x75,0x73,
0x65,0x20,0x2b,0x3d,0x20,0x44,0x3b,0x0d,0x0a,0x09,
0x09,0x09,0x73,0x70,0x65,0x63,0x20,0x2b,0x3d,0x20,
0x53,0x3b,0x0d,0x0a,0x09,0x09,0x7d,0x0d,0x0a,0x0d,
0x0a,0x09,0x09,0x2f,0x2f,0x20,0x4d,0x6f,0x64,0x75,
0x6c,0x61,0x74,0x65,0x20,0x77,0x69,0x74,0x68,0x20,
0x6c,0x61,0x74,0x65,0x20,0x61,0x64,0x64,0x2e,0x0d,
0x0a,0x09,0x09,0x6c,0x69,0x74,0x43,0x6f,0x6c,0x6f,
0x72,0x20,0x3d,0x20,0x74,0x65,0x78,0x43,0x6f,0x6c,
0x6f,0x72,0x20,0x2a,0x20,0x28,0x61,0x6d,0x62,0x69,
0x65,0x6e,0x74,0x20,0x2b,0x20,0x64,0x69,0x66,0x66,
0x75,0x73,0x65,0x29,0x20,0x2b,0x20,0x73,0x70,0x65,
0x63,0x3b,0x0d,0x0a,0x09,0x7d,0x0d,0x0a,0x0d,0x0a,
0x09,0x2f,0x2f,0x0d,0x0a,0x09,0x2f,0x2f,0x20,0xe9,
0x9b,0xbe,0xe5,0x8c,0x96,0x0d,0x0a,0x09,0x2f,0x2f,
0x0d,0x0a,0x09,0x0d,0x0a,0x09,0x69,0x66,0x20,0x28,
0x67,0x46,0x6f,0x67,0x45,0x6e,0x61,0x62,0x6c,0x65,
0x64,0x29,0x0d,0x0a,0x09,0x7b,0x09,0x09,0x0d,0x0a,
0x09,0x09,0x66,0x6c,0x6f,0x61,0x74,0x20,0x66,0x6f,
0x67,0x4c,0x65,0x72,0x70,0x20,0x3d,0x20,0x73,0x61,
0x74,0x75,0x72,0x61,0x74,0x65,0x28,0x28,0x64,0x69,
0x73,0x74,0x54,0x6f,0x45,0x79,0x65,0x20,0x2d,0x20,
0x67,0x46,0x6f,0x67,0x53,0x74,0x61,0x72,0x74,0x29,
0x20,0x2f,0x20,0x67,0x46,0x6f,0x67,0x52,0x61,0x6e,
0x67,0x65,0x29,0x3b,0x0d,0x0a,0x0d,0x0a,0x09,0x09,
0x2f,0x2f,0x20,0xe6,0xb7,0xb7,0xe5,0x90,0x88,0xe9,
0x9b,0xbe,0xe9,0xa2,0x9c,0xe8,0x89,0xb2,0xe5,0x92,
0x8c,0xe5,0x85,0x89,0xe7,0x85,0xa7,0xe9,0xa2,0x9c,
0xe8,0x89,0xb2,0x0d,0x0a,0x09,0x09,0x6c,0x69,0x74,
0x43,0x6f,0x6c,0x6f,0x72,0x20,0x3d,0x20,0x6c,0x65,
0x72,0x70,0x28,0x6c,0x69,0x74,0x43,0x6f,0x6c,0x6f,
0x72,0x2c,0x20,0x67,0x46,0x6f,0x67,0x43,0x6f,0x6c,
0x6f,0x72,0x2c,0x20,0x66,0x6f,0x67,0x4c,0x65,0x72,
0x70,0x29,0x3b,0x0d,0x0a,0x09,0x7d,0x0d,0x0a,0x0d,
0x0a,0x09,0x2f,0x2f,0x20,0xe4,0xbb,0x8e,0xe6,0xbc,
0xab,0xe5,0x8f,0x8d,0xe5,0xb0,0x84,0xe6,0x9d,0x90,
0xe8,0xb4,0xa8,0xe5,0x92,0x8c,0xe7,0xba,0xb9,0xe7,
0x90,0x86,0xe4,0xb8,0xad,0xe6,0x8f,0x90,0xe5,0x8f,
0x96,0x61,0x6c,0x70,0x68,0x61,0x0d,0x0a,0x09,0x6c,
0x69,0x74,0x43,0x6f,0x6c,0x6f,0x72,0x2e,0x61,0x20,
0x3d,0x20,0x67,0x4d,0x61,0x74,0x65,0x72,0x69,0x61,
0x6c,0x2e,0x44,0x69,0x66,0x66,0x75,0x73,0x65,0x2e,
0x61,0x20,0x2a,0x20,0x74,0x65,0x78,0x43,0x6f,0x6c,
0x6f,0x72,0x2e,0x61,0x3b,0x0d,0x0a,0x09,0x0d,0x0a,
0x09,0x69,0x66,0x20,0x28,0x67,0x49,0x6e,0x76,0x43,
0x6f,0x6c,0x6f,0x72,0x29,0x0d,0x0a,0x09,0x09,0x6c,
0x69,0x74,0x43,0x6f,0x6c,0x6f,0x72,0x2e,0x72,0x67,
0x62,0x20,0x3d,0x20,0x66,0x6c,0x6f,0x61,0x74,0x33,
0x28,0x31,0x2c,0x20,0x31,0x2c,0x20,0x31,0x29,0x20,
0x2d,0x20,0x6c,0x69,0x74,0x43,0x6f,0x6c,0x6f,0x72,
0x2e,0x72,0x67,0x62,0x3b,0x0d,0x0a,0x09,0x72,0x65,
0x74,0x75,0x72,0x6e,0x20,0x6c,0x69,0x74,0x43,0x6f,
0x6c,0x6f,0x72,0x3b,0x0d,0x0a,0x7d,0x0d,0x0a,0x0d,
0x0a,0x0d,0x0a,0x74,0x65,0x63,0x68,0x6e,0x69,0x71,
0x75,0x65,0x31,0x31,0x20,0x54,0x30,0x0d,0x0a,0x7b,
0x0d,0x0a,0x09,0x70,0x61,0x73,0x73,0x20,0x50,0x30,
0x0d,0x0a,0x09,0x7b,0x0d,0x0a,0x09,0x09,0x53,0x65,
0x74,0x56,0x65,0x72,0x74,0x65,0x78,0x53,0x68,0x61,
0x64,0x65,0x72,0x28,0x43,0x6f,0x6d,0x70,0x69,0x6c,
0x65,0x53,0x68,0x61,0x64,0x65,0x72,0x28,0x76,0x73,
0x5f,0x35,0x5f,0x30,0x2c,0x20,0x56,0x53,0x28,0x29,
0x29,0x29,0x3b,0x0d,0x0a,0x09,0x09,0x53,0x65,0x74,
0x50,0x69,0x78,0x65,0x6c,0x53,0x68,0x61,0x64,0x65,
0x72,0x28,0x43,0x6f,0x6d,0x70,0x69,0x6c,0x65,0x53,
0x68,0x61,0x64,0x65,0x72,0x28,0x70,0x73,0x5f,0x35,
0x5f,0x30,0x2c,0x20,0x50,0x53,0x28,0x29,0x29,0x29,
0x3b,0x0d,0x0a,0x09,0x09,0x53,0x65,0x74,0x52,0x61,
0x73,0x74,0x65,0x72,0x69,0x7a,0x65,0x72,0x53,0x74,
0x61,0x74,0x65,0x28,0x52,0x53,0x74,0x61,0x74,0x65,
0x29,0x3b,0x0d,0x0a,0x09,0x7d,0x0d,0x0a,0x7d,0x0d,
0x0a
};

void DefaultEngineEventCallBack::OnEngineInitialized(IVirtualEngine* eng)
{
	engine = eng;
	engine.As(&renderer);
	renderer->GetPointer(IID_ID3D11Device, (void**)&pDevice);
	renderer->GetPointer(IID_ID3D11DeviceContext, (void**)&pContext);
	if (SUCCEEDED(LoadShader()))
	{
		D3D11_INPUT_ELEMENT_DESC vertexDesc[] =
		{
			{"POSITION", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0},
			{"NORMAL", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0},
			{"TEXCOORD", 0, DXGI_FORMAT_R32G32_FLOAT, 0, 24, D3D11_INPUT_PER_VERTEX_DATA, 0}
		};
		D3DX11_PASS_DESC passDesc;
		mPass->GetDesc(&passDesc);
		pDevice->CreateInputLayout(vertexDesc, 3, passDesc.pIAInputSignature, passDesc.IAInputSignatureSize, &mInputLayout);
		pContext->IASetInputLayout(mInputLayout.Get());
		pContext->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST);
	}
}

void DefaultEngineEventCallBack::OnEngineDestroy()
{
	engine.Reset();
	renderer.Reset();
	pDevice.Reset();
	mInputLayout.Reset();
	pContext.Reset();
	mTech.Reset();
	mPass.Reset();
	mMatWVP.Reset();
	mMatWorld.Reset();
	mMatWIT.Reset();
	mMatTexture.Reset();
	mLights.Reset();
	mMaterial.Reset();
	mLightCount.Reset();
	mTexture.Reset();
	mFogEnabled.Reset();
	mFogStart.Reset();
	mFogRange.Reset();
	mFogColor.Reset();
	mEyePos.Reset();
	mInvEnabled.Reset();
	effect.Reset(); //effect必须在所有子对象Release后再释放
}

void DefaultEngineEventCallBack::OnStartRender()
{
	if (active)
	{
		mMatWVP->SetMatrix((float*)&renderer->GetWVPMatrix());
		XMMATRIX matWorld = renderer->GetWorldMatrix();
		mMatWorld->SetMatrix((float*)&matWorld);
		XMVECTOR det = XMMatrixDeterminant(matWorld);
		matWorld = XMMatrixTranspose(XMMatrixInverse(&det, matWorld));
		mMatWIT->SetMatrix((float*)&matWorld);
		mMatTexture->SetMatrix((float*)&renderer->GetTextureMatrix());
		mPass->Apply(0, pContext.Get());
	}
}

void DefaultEngineEventCallBack::OnBufferResized(UINT width, UINT height) {}

void DefaultEngineEventCallBack::RecvShaderData(UINT type, LPVOID data1, LPVOID data2)
{
	switch (type)
	{
	case SD_LIGHT:
		memcpy(&lights[(int)data1], data2, sizeof(Light));
		if (lightsEnabled[(int)data1])
			UpdateLights();
		break;
	case SD_LIGHTENABLED:
		lightsEnabled[(int)data1] = (bool)data2;
		UpdateLights();
		break;
	case SD_MATERIAL:
		mMaterial->SetRawValue(data1, 0, sizeof(Material));
		break;
	case SD_TEXTURE:
		mTexture->SetResource((ID3D11ShaderResourceView*)data1);
		break;
	case SD_FOGENABLED:
		mFogEnabled->SetBool((bool)data1);
		break;
	case SD_FOGSTART:
		mFogStart->SetFloat(*((float*)data1));
		break;
	case SD_FOGRANGE:
		mFogRange->SetFloat(*((float*)data1));
		break;
	case SD_FOGCOLOR:
		mFogColor->SetFloatVector((float*)data1);
		break;
	case SD_INVENABLED:
		mInvEnabled->SetBool((bool)data1);
		break;
	case SD_UPDATEMATRIX:
	{
		ICamera* mainCamera = (ICamera*)data1;
		Vector3 location = mainCamera->GetLocation();
		Quaternion rotation = mainCamera->GetRotation();
		D3D11_VIEWPORT vp;
		UINT vpNum = 1;
		pContext->RSGetViewports(&vpNum, &vp);
		if (mainCamera->GetType() == CAMERA_TYPE_PROJECTIVE)
		{
			XMMATRIX matView = XMMatrixLookAtLH(location.GetXMVECTOR(), (location + Vector3{ 0,0,1 }).GetXMVECTOR(), XMVectorSet(0, 1, 0, 0));
			matView *= XMMatrixTranspose(XMMatrixRotationQuaternion(rotation.GetXMVECTOR()));
			renderer->SetViewMatrix(matView);
			renderer->SetProjectionMatrix(XMMatrixPerspectiveFovLH(mainCamera->GetFov(), vp.Width / (float)vp.Height, 0.1, 1000));
		}
		else
		{
			XMMATRIX matView = XMMatrixLookAtLH(location.GetXMVECTOR(), (location + Vector3{ 0,0,1 }).GetXMVECTOR(), XMVectorSet(0, 1, 0, 0));
			matView *= XMMatrixTranspose(XMMatrixRotationQuaternion(rotation.GetXMVECTOR()));
			renderer->SetViewMatrix(matView);
			USize size = mainCamera->GetOrthogonalSize();
			if (size.width == 0 && size.height == 0)
				renderer->SetProjectionMatrix(XMMatrixOrthographicLH(vp.Width, vp.Height, 0.1, 1000));
			else
				renderer->SetProjectionMatrix(XMMatrixOrthographicLH(size.width, size.height, 0.1, 1000));
		}
		mEyePos->SetRawValue(&location, 0, sizeof(Vector3));
		break;
	}
	}
}

HRESULT DefaultEngineEventCallBack::LoadShader()
{
	DWORD shaderFlags = 0;
#if defined(DEBUG) || defined(_DEBUG)
	shaderFlags |= D3D10_SHADER_DEBUG;
	shaderFlags |= D3D10_SHADER_SKIP_OPTIMIZATION;
#endif
	ComPtr<ID3DBlob> compilationMsgs = 0;
	HRESULT hr = D3DX11CompileEffectFromMemory(shaderBlob, sizeof(shaderBlob), "tech.fx", 0,
		0, 0, 0, pDevice.Get(), &effect, &compilationMsgs);
	if (compilationMsgs != 0 && isContain((char*)compilationMsgs->GetBufferPointer(), "error"))
	{
		engine->ReportFatalError((char*)compilationMsgs->GetBufferPointer(), FE_UNKNOWN);
		return ERR_UNKNOWN;
	}

	mTech = effect->GetTechniqueByName("T0");
	mPass = mTech->GetPassByIndex(0);
	mMatWVP = effect->GetVariableByName("gWorldViewProj")->AsMatrix();
	mLights = effect->GetVariableByName("gLights");
	mLightCount = effect->GetVariableByName("gLightCount")->AsScalar();
	mMaterial = effect->GetVariableByName("gMaterial");
	mTexture = effect->GetVariableByName("gDiffuseMap")->AsShaderResource();
	mFogStart = effect->GetVariableByName("gFogStart")->AsScalar();
	mFogRange = effect->GetVariableByName("gFogRange")->AsScalar();
	mFogColor = effect->GetVariableByName("gFogColor")->AsVector();
	mFogEnabled = effect->GetVariableByName("gFogEnabled")->AsScalar();
	mEyePos = effect->GetVariableByName("gEyePosW");
	mMatWorld = effect->GetVariableByName("gWorld")->AsMatrix();
	mMatWIT = effect->GetVariableByName("gWorldInvTranspose")->AsMatrix();
	mMatTexture = effect->GetVariableByName("gTexTransform")->AsMatrix();
	mInvEnabled = effect->GetVariableByName("gInvColor")->AsScalar();

	return SUCCEED_OPERATE;
}

void DefaultEngineEventCallBack::UpdateLights()
{
	int index = 0;
	for (int i = 0; i < 10; i++)
	{
		if (lightsEnabled[i])
		{
			mLights->GetElement(index)->SetRawValue(&lights[i], 0, sizeof(Light));
			index++;
		}
	}
	mLightCount->SetInt(index);
}

void DefaultEngineErrorCallBack::ReportFatalError(LPCSTR msg, int errcode)
{
	ostringstream str;
	str << "运行时发生了致命错误(" << errcode << ")：" << msg;
	MessageBox(0, str.str().c_str(), "Fatal Error", MB_ICONERROR);
	exit(-1);
}

void DefaultEngineErrorCallBack::ReportError(LPCSTR msg)
{
	printf(msg);
}

DefaultRenderTargetRenderer::DefaultRenderTargetRenderer(IRenderer* renderer, IRenderTarget* srcTarget) :mRef(0),autoClear(true),
backColor(0,0,0,0), texMat(XMMatrixIdentity()), bounds({0,0,100,100})
{
	this->renderer = renderer;
	this->srcTarget = srcTarget;
	renderer->GetPointer(IID_ID3D11DeviceContext, &pContext);
}

void DefaultRenderTargetRenderer::OnFetchData() {}

void DefaultRenderTargetRenderer::OnRender2D() {}

void DefaultRenderTargetRenderer::OnRender()
{
	USize srcSize = srcTarget->GetSize();
	USize destSize = renderer->GetRenderTarget()->GetSize();
	XMMATRIX worldMat = XMMatrixIdentity();
	worldMat *= XMMatrixTranslation(0.5, -0.5, 0);
	worldMat *= XMMatrixScaling(bounds.width * destSize.width, bounds.height * destSize.height, 1);
	worldMat *= XMMatrixTranslation(-0.5 * destSize.width + bounds.x * destSize.width, 0.5 * destSize.height - bounds.y * destSize.height, 0);
	Renderer* r = static_cast<Renderer*>(renderer.Get());
	pContext->IASetInputLayout(r->mCanvasInput.Get());
	UINT stride = 20;
	UINT offset = 0;
	pContext->IASetVertexBuffers(0, 1, r->mCanvasVertexBuffer.GetAddressOf(), &stride, &offset);
	r->SetWorldMatrix(worldMat);
	r->SetViewMatrix(XMMatrixIdentity());
	r->SetProjectionMatrix(XMMatrixOrthographicLH(destSize.width, destSize.height, 0.1, 1000));
	r->mCanvasMatWVP->SetMatrix((float*)&r->GetWVPMatrix());
	r->mCanvasMatTexture->SetMatrix((float*)&texMat);
	r->mCanvasTexture->SetResource(srcTarget->GetShaderResourceView());
	r->mCanvasPass->Apply(0, pContext.Get());
	pContext->Draw(6, 0);
	r->mCanvasTexture->SetResource(0);
	r->mCanvasPass->Apply(0, pContext.Get());

	if (autoClear)
		renderer->ClearRenderTarget(srcTarget.Get(), backColor);
}

RectangleF DefaultRenderTargetRenderer::GetBounds()
{
	return bounds;
}

void DefaultRenderTargetRenderer::SetBounds(const RectangleF& rect)
{
	bounds = rect;
}

HRESULT _stdcall DefaultRenderTargetRenderer::QueryInterface(const IID& iid, void** ppvObject)
{
	if (iid == IID_IRenderable)
	{
		*ppvObject = static_cast<IRenderable*>(this);
	}
	else
	{
		*ppvObject = NULL;
		return E_NOINTERFACE;
	}
	static_cast<IUnknown*>(*ppvObject)->AddRef();
	return S_OK;
}

ULONG _stdcall DefaultRenderTargetRenderer::AddRef()
{
	return InterlockedIncrement(&mRef);
}

ULONG _stdcall DefaultRenderTargetRenderer::Release()
{
	ULONG val = InterlockedDecrement(&mRef);
	if (val == 0)
	{
		delete this;
	}
	return val;
}

void DefaultRenderTargetRenderer::SetSourceRect(const RectangleF& rect)
{
	texMat = XMMatrixIdentity();
	texMat *= XMMatrixScaling(rect.width / 1, rect.height / 1, 1);
	texMat *= XMMatrixTranslation(rect.x, rect.y, 0);
}

LRESULT WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
	extern vector<Engine*> engineArray;
	switch (msg)
	{
	case WM_DESTROY:
		PostQuitMessage(0);
		break;
	case WM_MENUCHAR:
		return MAKELRESULT(0, MNC_CLOSE);
	case WM_SETFOCUS:
	{
		UINT newWidth = LOWORD(lParam);
		UINT newHeight = HIWORD(lParam);
		for (vector<Engine*>::iterator it = engineArray.begin(); it != engineArray.end(); it++)
		{
			if ((*it)->mDesc.outputWindow == hwnd)
			{
				ComPtr<IRenderer> renderer;
				(*it)->QueryInterface(IID_IRenderer, &renderer);
				if (!renderer->GetWindowed())
					renderer->SetWindowed(false, SCALING_MODE_UNSPECIFIED);
			}
		}
	}
	break;
	case WM_KILLFOCUS:
	{
		for (vector<Engine*>::iterator it = engineArray.begin(); it != engineArray.end(); it++)
		{
			if ((*it)->mDesc.outputWindow == hwnd)
			{
				ComPtr<IRenderer> renderer;
				(*it)->QueryInterface(IID_IRenderer, &renderer);
				if (!renderer->GetWindowed())
					ShowWindow(hwnd, SW_MINIMIZE);
			}
		}
	}
	break;
	}
	return ::DefWindowProc(hwnd, msg, wParam, lParam);
}

HRESULT CreateDefaultWindow(EngineDescription& des)
{
	int scrWidth = GetSystemMetrics(SM_CXSCREEN);
	int scrHeight = GetSystemMetrics(SM_CYSCREEN);
	RECT winRect;
	winRect.left = MAX((scrWidth - des.videoDesc.bufferWidth) / 2, 0);
	winRect.right = winRect.left + des.videoDesc.bufferWidth;
	winRect.top = MAX((scrHeight - des.videoDesc.bufferHeight) / 2, 0);
	winRect.bottom = winRect.top + des.videoDesc.bufferHeight;
	AdjustWindowRect(&winRect, WS_OVERLAPPEDWINDOW | WS_SIZEBOX, 0);

	WNDCLASS wc;
	wc.style = CS_HREDRAW | CS_VREDRAW;
	wc.lpfnWndProc = (WNDPROC)WndProc;
	wc.cbClsExtra = 0;
	wc.cbWndExtra = 0;
	wc.hInstance = des.hInstance;
	wc.hIcon = LoadIcon(0, IDI_APPLICATION);
	wc.hCursor = LoadCursor(0, IDC_ARROW);
	wc.hbrBackground = (HBRUSH)GetStockObject(BLACK_BRUSH);
	wc.lpszMenuName = 0;
	wc.lpszClassName = des.className;
	if (!RegisterClass(&wc))
		return ERR_CREATEWINDOW;
	des.outputWindow = CreateWindow(des.className, des.windowName, 
		WS_EX_TOPMOST | WS_SYSMENU | WS_MINIMIZEBOX | WS_CAPTION,
		winRect.left, winRect.top, winRect.right - winRect.left, winRect.bottom - winRect.top,
		0, 0, des.hInstance, 0);
	if (des.outputWindow)
		return SUCCEED_OPERATE;
	return  ERR_CREATEWINDOW;
}